---
phase: 02-swipe-interactions
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
autonomous: true
must_haves:
  truths:
    - "Card springs back smoothly when released under threshold"
    - "Spring animation uses soft bouncy cubic-bezier curve"
    - "Exit animations feel like cards are thrown off screen"
    - "Exit uses correct translate and rotate values per spec"
  artifacts:
    - path: "index.html"
      provides: "CSS animations for spring and exit"
      min_lines: 50
  key_links:
    - from: "index.html CSS"
      to: "App.tsx card transform"
      via: "CSS classes and inline transition styles"
---

## Objective

Implement spring physics animations for snap-back behavior and refine exit animations to match Phase 2 specifications. Update the CSS in index.html with precise cubic-bezier curves and keyframe animations.

**Purpose:** Create the premium "Tinder-style" swipe feel with spring physics and satisfying exit animations.

**Output:** Updated index.html with spring physics CSS class and refined exit keyframe animations.

## Execution Context

@/Users/yevgenschweden/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/yevgenschweden/.config/opencode/get-shit-done/templates/summary.md

## Context

@/Users/yevgenschweden/hyperscale/.planning/PROJECT.md
@/Users/yevgenschweden/hyperscale/.planning/ROADMAP.md
@/Users/yevgenschweden/hyperscale/.planning/STATE.md
@/Users/yevgenschweden/hyperscale/.planning/phases/02-swipe-interactions/02-CONTEXT.md

@/Users/yevgenschweden/hyperscale/index.html

### Current Implementation

The index.html currently has basic exit animations:
- `.swipe-exit-left` and `.swipe-exit-right` classes
- Exit animation: 300ms with cubic-bezier(0.25, 0.46, 0.45, 0.94)
- Current exit: translateX(±150%) rotate(±20deg)
- No spring physics class exists

### Requirements from CONTEXT.md

**SWIPE-01: Spring physics snap-back**
- CSS cubic-bezier(0.34, 1.56, 0.64, 1) for soft bouncy return
- Triggered when swipe released under threshold (100px)
- Duration: 500-600ms for natural feel

**SWIPE-05: Exit animations**
- Left exit: translateX(-120%) rotate(-25deg) + fade out
- Right exit: translateX(120%) rotate(25deg) + fade out
- Duration: 350ms (not 300ms)
- Easing: cubic-bezier(0.25, 0.46, 0.45, 0.94)

## Tasks

<task type="auto">
  <name>Task 1: Add spring physics CSS class</name>
  <files>index.html</files>
  <action>
    Add a new CSS class `.spring-snap-back` in the style block that provides the spring physics animation for when a card is released under the swipe threshold.

    The class should:
    - Use `transition: transform 0.55s cubic-bezier(0.34, 1.56, 0.64, 1)`
    - This creates a soft bouncy overshoot effect (the cubic-bezier values have y > 1 for the second point, causing the overshoot)
    - Apply to transform property only (translateX, rotate)
    - Duration 550ms (middle of 500-600ms range)

    Add this class in the CSS section alongside other animation classes (after `.swipe-exit-right` around line 80).

    Note: This class will be conditionally applied in App.tsx via JavaScript when isDragging becomes false and no exit direction is set.
  </action>
  <verify>
    grep -A 3 "\.spring-snap-back" index.html
    Should show the CSS class with correct cubic-bezier values
  </verify>
  <done>
    - `.spring-snap-back` class exists in index.html
    - Uses cubic-bezier(0.34, 1.56, 0.64, 1)
    - Duration is 500-600ms (550ms preferred)
    - Targets transform property
  </done>
</task>

<task type="auto">
  <name>Task 2: Update exit animation keyframes</name>
  <files>index.html</files>
  <action>
    Update the existing `@keyframes swipeExitLeft` and `@keyframes swipeExitRight` to match the Phase 2 specification.

    Current (lines 82-102):
    - Left: translateX(-150%) rotate(-20deg)
    - Right: translateX(150%) rotate(20deg)
    - Duration: 0.3s (300ms)

    Update to:
    - Left exit: `translateX(-120%) rotate(-25deg)` + fade out (opacity 0)
    - Right exit: `translateX(120%) rotate(25deg)` + fade out (opacity 0)
    - Update class durations from 0.3s to 0.35s (350ms)
    - Keep existing cubic-bezier(0.25, 0.46, 0.45, 0.94)

    The "to" keyframe should include both transform and opacity changes:
    ```css
    @keyframes swipeExitLeft {
      from { transform: translateX(0) rotate(0deg); opacity: 1; }
      to { transform: translateX(-120%) rotate(-25deg); opacity: 0; }
    }
    ```

    Also update the `.swipe-exit-left` and `.swipe-exit-right` class durations from 0.3s to 0.35s.
  </action>
  <verify>
    grep -A 5 "@keyframes swipeExitLeft" index.html | head -7
    grep -A 5 "@keyframes swipeExitRight" index.html | head -7
    grep "swipe-exit-left" index.html
    Both keyframes should show 120% translate and 25deg rotate
  </verify>
  <done>
    - swipeExitLeft uses translateX(-120%) rotate(-25deg)
    - swipeExitRight uses translateX(120%) rotate(25deg)
    - Both fade to opacity: 0
    - Class duration updated to 0.35s (350ms)
    - Easing remains cubic-bezier(0.25, 0.46, 0.45, 0.94)
  </done>
</task>

<task type="auto">
  <name>Task 3: Add will-change optimization</name>
  <files>index.html</files>
  <action>
    Add `will-change: transform, opacity` to the card styles to optimize performance for the swipe animations.

    Look for the swipe-exit-left/right class definitions (around lines 74-80) and add will-change property to both, OR create a dedicated `.swipe-card` utility class that includes will-change.

    Recommended approach: Add will-change to the existing swipe-exit classes:
    ```css
    .swipe-exit-left {
      animation: swipeExitLeft 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      will-change: transform, opacity;
    }
    ```

    This tells the browser to optimize these properties for animation, improving performance on mobile devices.
  </action>
  <verify>
    grep -B 1 -A 2 "will-change" index.html | grep -A 3 "swipe-exit"
    Should show will-change on the swipe-exit classes
  </verify>
  <done>
    - will-change: transform, opacity added to swipe animation classes
    - Performance optimization in place for 60fps target
  </done>
</task>

## Verification

### Code Verification
- [ ] `.spring-snap-back` class exists with cubic-bezier(0.34, 1.56, 0.64, 1)
- [ ] Exit keyframes use 120% translate and 25deg rotate values
- [ ] Exit animation duration is 0.35s (350ms)
- [ ] will-change optimization is present

### Behavior Verification
- [ ] CSS syntax is valid (no parsing errors)
- [ ] Animation timing functions match spec

## Success Criteria

1. Spring physics CSS class is ready for use in App.tsx
2. Exit animations match spec: 120% translate, 25deg rotate, 350ms
3. Performance optimizations (will-change) are in place
4. All CSS changes maintain existing styling (no regressions)

## Output

After completion, create `.planning/phases/02-swipe-interactions/02-01-SUMMARY.md`
