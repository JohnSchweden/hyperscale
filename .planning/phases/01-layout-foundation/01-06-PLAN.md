---
phase: 01-layout-foundation
plan: 06
type: execute
wave: 1
depends_on: []
files_modified: [components/LayoutShell.tsx]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "All 8 screens display content properly centered on desktop (>=1024px)"
    - "Inner content with max-w-* constraints centers horizontally within LayoutShell"
    - "No visual offset or left-alignment on desktop screens"
    - "Mobile layout remains top-anchored and unaffected by changes"
  artifacts:
    - path: "components/LayoutShell.tsx"
      provides: "Fixed centering logic for inner content"
      contains: "mx-auto on main element"
  key_links:
    - from: "LayoutShell main element"
      to: "Inner content containers"
      via: "mx-auto horizontal centering"
      pattern: "className=.*mx-auto"

user_setup: []
---

<objective>
Fix desktop centering issue where content with max-w-* constraints appears left-aligned instead of centered within LayoutShell.

Purpose: Resolve the visual layout bug discovered during verification where all 8 screens fail to center content properly on desktop viewports.

Output: LayoutShell component updated with proper horizontal centering for constrained-width content.
</objective>

<execution_context>
@/Users/yevgenschweden/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/yevgenschweden/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/01-layout-foundation/01-04-SUMMARY.md

**Gap Source:** Verification of Phase 1 discovered desktop centering is broken.

**Current LayoutShell (BROKEN):**
```tsx
<div className="flex flex-col w-full lg:items-center lg:justify-center items-start pt-20 min-h-[100dvh] bg-black safe-area-top safe-area-bottom">
  {header && <header className="flex-shrink-0">{header}</header>}
  <main className="flex-1 flex flex-col w-full">{children}</main>
  {footer && <footer className="flex-shrink-0">{footer}</footer>}
</div>
```

**Problem:** 
- `lg:items-center` centers children along the cross-axis (horizontal for flex-col)
- But `w-full` on the main element stretches it to full width
- Inner content with `max-w-*` remains left-aligned within the full-width container
- Result: Content appears too high and left-aligned on desktop

**Affected Screens (all 8):**
1. Intro - uses max-w-xl for text
2. Personality Select - uses max-w-5xl
3. Role Select - uses max-w-4xl
4. Initializing - uses max-w-xl
5. Game - uses max-w-4xl for HUD, max-w-[43rem] for card
6. Boss Fight - uses max-w-3xl
7. Game Over - uses max-w-2xl
8. Summary - uses max-w-2xl

**Root Cause:** Missing `mx-auto` on the main content container to center it horizontally when content has width constraints.
</context>

<tasks>

<task type="auto">
  <name>Fix LayoutShell desktop centering</name>
  <files>components/LayoutShell.tsx</files>
  <action>
Update LayoutShell.tsx to properly center inner content on desktop:

1. Add `lg:items-center` to the main element to center its children horizontally
2. The main element already has `flex flex-col` and `w-full`
3. Add `items-start lg:items-center` to handle both mobile (left-aligned) and desktop (centered)

Current main element:
```
<main className="flex-1 flex flex-col w-full">{children}</main>
```

Updated main element:
```
<main className="flex-1 flex flex-col w-full items-start lg:items-center">{children}</main>
```

This ensures:
- Mobile (<1024px): items-start keeps content left-aligned (app-like feel)
- Desktop (>=1024px): items-center centers content horizontally
- Inner elements with max-w-* will now center properly because their parent's items-center aligns them
  </action>
  <verify>Read components/LayoutShell.tsx and confirm main element has `items-start lg:items-center` class</verify>
  <done>LayoutShell main element centers children horizontally on desktop while keeping mobile left-aligned</done>
</task>

<task type="auto">
  <name>Verify all 8 screens center properly</name>
  <files>App.tsx (verification only)</files>
  <action>
Verify that all 8 render methods in App.tsx use LayoutShell and will benefit from the fix:

1. Check renderIntro uses LayoutShell
2. Check renderPersonalitySelect uses LayoutShell
3. Check renderRoleSelect uses LayoutShell
4. Check renderInitializing uses LayoutShell
5. Check renderGame uses LayoutShell
6. Check renderBoss uses LayoutShell
7. Check renderGameOver uses LayoutShell
8. Check renderSummary uses LayoutShell

All were updated in Plans 01-02 through 01-04. Confirm no direct issues in App.tsx.
  </action>
  <verify>Grep for "LayoutShell" usage in App.tsx - should appear in all 8 render methods</verify>
  <done>All 8 screens confirmed to use LayoutShell and will display centered content on desktop</done>
</task>

</tasks>

<verification>
After implementation:
1. LayoutShell.tsx main element has `items-start lg:items-center`
2. Desktop viewport (>=1024px): Content centers horizontally
3. Mobile viewport (<1024px): Content remains top-anchored and left-aligned
4. All 8 screens benefit from the fix without individual modifications
</verification>

<success_criteria>
- Desktop centering works on all 8 screens
- Content with max-w-* constraints centers properly
- Mobile layout remains unchanged (top-anchored, left-aligned)
- No visual jumps between screen transitions
- Gap closed: Desktop centering broken â†’ Desktop centering fixed
</success_criteria>

<output>
After completion, create `.planning/phases/01-layout-foundation/01-06-SUMMARY.md`
</output>
