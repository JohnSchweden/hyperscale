---
phase: 01-layout-foundation
plan: 09
type: execute
wave: 1
depends_on: []
files_modified: [App.tsx]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Roast window fully visible on mobile, not cut off at bottom"
    - "Boot button (Init roast) fully visible and tappable (44px minimum)"
  artifacts:
    - path: "App.tsx"
      provides: "Game content with proper bottom padding for fixed taskbar"
      changes: "Change pb-2 to pb-14 (or pb-16) on main content container (line 570)"
    - path: "App.tsx"
      provides: "Roast terminal with bottom margin"
      changes: "Add mb-12 to roast terminal container for additional clearance"
  key_links:
    - from: "App.tsx main content"
      to: "App.tsx fixed taskbar"
      pattern: "pb-14+ padding clears h-12 (48px) fixed taskbar"
---

<objective>
Fix roast window and boot button cutoff on mobile by adding proper bottom padding to clear the fixed taskbar.

Purpose: On mobile, the fixed 48px taskbar at the bottom overlaps content that only has 8px bottom padding, cutting off the roast terminal and boot button.

Output: All Game screen content fully visible above the fixed taskbar with 44px minimum touch targets accessible.
</objective>

<execution_context>
@/Users/yevgenschweden/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/yevgenschweden/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-layout-foundation/01-UAT.md
@/Users/yevgenschweden/hyperscale/App.tsx

## Gap Details (from UAT)

**Gap 3: Roast Window Cutoff (Major)**
- Truth: "Roast window fully visible on mobile, not cut off"
- Status: Failed
- Root cause: Fixed taskbar (48px) overlaps main content because content container only has 8px bottom padding on mobile - insufficient to clear the overlay
- Artifacts:
  - `App.tsx` line 570: Main content container has `pb-2` (8px) on mobile - insufficient for 48px taskbar
  - `App.tsx` line 687: Taskbar uses `fixed bottom-0 h-12` (48px) with z-20, overlaying content
  - `App.tsx` line 655-683: Roast terminal has h-auto on mobile with no margin-bottom to clear taskbar

**Gap 4: Boot Button Cutoff (Major)**
- Truth: "Boot button fully visible and tappable (44px minimum)"
- Status: Failed  
- Root cause: Same as test 4: Fixed taskbar (48px) overlaps content with only 8px padding, cutting off the boot button at the bottom of roast terminal
- Artifacts:
  - `App.tsx` line 570: Main content container has `pb-2` (8px) insufficient for 48px taskbar
  - `App.tsx` line 669-675: Init roast button is last element in roast terminal, positioned in overlap zone

## Root Cause Analysis

Both gaps share the same root cause:
- Fixed taskbar: `h-12` = 48px at `fixed bottom-0` with `z-20`
- Main content padding: `pb-2` = 8px on mobile
- Gap: 48px - 8px = 40px of content gets cut off
- Required padding: 48px (taskbar) + 8px (breathing room) = 56px = `pb-14`
</context>

<tasks>

<task type="auto">
  <name>Fix main content bottom padding for taskbar clearance</name>
  <files>App.tsx (line 570)</files>
  <action>
    Change the main content container's bottom padding from `pb-2` to `pb-14` on mobile (keep md:pb-4 for desktop).
    
    Current code (line 570):
    ```tsx
    <div className="flex-1 flex flex-col items-center justify-center pt-8 md:pt-12 p-3 pb-2 md:p-8 md:pb-4 gap-4 md:gap-8">
    ```
    
    Change to:
    ```tsx
    <div className="flex-1 flex flex-col items-center justify-center pt-8 md:pt-12 p-3 pb-14 md:p-8 md:pb-4 gap-4 md:gap-8">
    ```
    
    Rationale: 
    - Taskbar height: `h-12` = 48px
    - Need: 48px (taskbar) + 8px (breathing room) = 56px
    - `pb-14` = 56px padding at bottom
    - Desktop (`md:`) keeps existing `pb-4` (16px) as desktop layout differs
    
    This ensures the roast terminal and boot button clear the fixed taskbar by 8px of breathing room.
  </action>
  <verify>Search App.tsx for the pattern "pb-14 md:p-8 md:pb-4" in the Game screen main content div</verify>
  <done>Main content container has pb-14 (56px) on mobile, clearing the 48px fixed taskbar with breathing room</done>
</task>

<task type="auto">
  <name>Add bottom margin to roast terminal for additional clearance</name>
  <files>App.tsx (line 654-655)</files>
  <action>
    Add `mb-12` (48px) bottom margin to the roast terminal container for extra clearance.
    
    Current code (lines 654-655):
    ```tsx
    {/* Side Roaster Terminal - Below incident */}
    <div className="w-full max-w-[43rem] lg:w-[43rem] h-auto lg:h-[260px] bg-black/80 border border-slate-800 rounded-xl overflow-hidden flex flex-col shadow-2xl">
    ```
    
    Change to:
    ```tsx
    {/* Side Roaster Terminal - Below incident */}
    <div className="w-full max-w-[43rem] lg:w-[43rem] h-auto lg:h-[260px] bg-black/80 border border-slate-800 rounded-xl overflow-hidden flex flex-col shadow-2xl mb-12">
    ```
    
    Rationale: 
    - Adding `mb-12` (48px) provides an additional safety buffer
    - Combined with parent container's `pb-14`, ensures boot button is never at risk of being cut off
    - This is a defensive measure - the padding fix in task 1 should be sufficient, but margin provides extra protection
    - On desktop (`lg:`), the margin can remain as it doesn't harm the layout
  </action>
  <verify>Check line 655 - roast terminal div should have class ending with "shadow-2xl mb-12"</verify>
  <done>Roast terminal has mb-12 (48px) bottom margin for additional taskbar clearance</done>
</task>

<task type="auto">
  <name>Verify boot button minimum touch target</name>
  <files>App.tsx (lines 669-675)</files>
  <action>
    Confirm the Init roast button already has proper touch target size and enhance if needed.
    
    Current code (lines 669-675):
    ```tsx
    <button 
      onClick={handleRoast}
      disabled={isRoasting}
      className="w-fit px-8 py-2.5 bg-green-900/20 border border-green-500/40 text-green-500 font-bold text-[10px] mono tracking-wide hover:bg-green-500 hover:text-black transition-all mb-3 min-h-[44px] self-center"
    >
      {isRoasting ? 'Scanning...' : 'Init roast'}
    </button>
    ```
    
    The button already has `min-h-[44px]` which meets WCAG 2.5.5 requirements for minimum touch target size (44px). 
    
    Verify by checking:
    1. `min-h-[44px]` is present in className
    2. Button is not being clipped by parent containers after padding fix
    
    If `min-h-[44px]` is missing, add it. If present, no change needed for this specific requirement.
  </action>
  <verify>Search for "Init roast" button - should show min-h-[44px] in its className</verify>
  <done>Boot button has 44px minimum height (WCAG 2.5.5 compliant) and is fully visible</done>
</task>

</tasks>

<verification>

### Automated Verification
1. **Code review**: Confirm pb-14 and mb-12 added correctly
2. **Build check**: `bun run build` should complete without errors

### Manual Verification Steps
1. Open the app on mobile (or mobile emulator in DevTools)
2. Navigate to Game screen (Personality → Role → Initializing → Game)
3. **Check roast terminal**: Should be fully visible, not cut off at bottom
4. **Check boot button**: "Init roast" button should be:
   - Fully visible (not cut off)
   - Tappable (44px minimum height)
   - Positioned above the taskbar with breathing room
5. **Verify on different mobile sizes**: Test iPhone SE, iPhone 14, and Android devices

### Success Criteria
- [ ] Roast terminal is fully visible on mobile
- [ ] Boot button is fully visible and not cut off
- [ ] Boot button has 44px minimum touch target (WCAG compliant)
- [ ] Content clears the fixed taskbar with at least 8px breathing room
- [ ] Desktop layout unchanged (taskbar is part of layout, not fixed)

</verification>

<success_criteria>
- **Observable truth**: "Roast window fully visible on mobile, not cut off at bottom" - User can see entire roast terminal including the boot button
- **Observable truth**: "Boot button fully visible and tappable (44px minimum)" - Button is accessible and meets WCAG 2.5.5
- **Code changes**: 
  - Main content: `pb-2` → `pb-14` on mobile
  - Roast terminal: Added `mb-12`
- **Build**: Passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-layout-foundation/01-09-SUMMARY.md`

Include:
- Changes made to App.tsx
- Padding/margin calculations for taskbar clearance
- Verification results
- Any additional notes
</output>
