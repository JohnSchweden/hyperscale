---
phase: 03-polish-performance
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - App.tsx
  - index.html
autonomous: true
must_haves:
  truths:
    - All screens use consistent color palette (slate grays, cyan accents)
    - Typography scale is uniform across all 8 stages
    - Spacing follows consistent scale (padding, margins, gaps)
    - Button styles are consistent (sizes, padding, border-radius)
    - Card styling is consistent (border-radius, shadows)
    - All text meets contrast requirements for readability
  artifacts:
    - path: index.html
      provides: Design system CSS variables for colors and typography
      contains: "--color-bg-primary, --color-text-primary, --color-accent"
    - path: App.tsx
      provides: All 8 screens use consistent Tailwind classes
      pattern: "bg-slate-, text-slate-, border-slate-"
  key_links:
    - from: index.html
      to: App.tsx
      via: CSS variables imported as custom properties for Tailwind
      pattern: "Design tokens referenced consistently"
---

<objective>
Conduct comprehensive design audit and standardize visual design system across all 8 game screens.

Purpose: Users experience a cohesive, professional visual system where every screen feels part of the same application. Consistent typography, colors, and spacing reduce cognitive load and reinforce brand identity.

Output: Updated index.html with design tokens as CSS variables, updated App.tsx with standardized class names across all render methods, audit report of inconsistencies found and fixed.
</objective>

<execution_context>
@/Users/yevgenschweden/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/yevgenschweden/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/03-polish-performance/03-CONTEXT.md

Key locked decisions from CONTEXT.md:
- Design audit scope: typography, colors, spacing, components, borders, shadows
- Color palette: slate grays with cyan accents (consistent with existing)
- Navigation vs gameplay split acknowledged but not yet decided

Current state audit:
**Typography inconsistencies found:**
- Heading sizes vary: text-6xl (Intro), text-3xl (Personality), text-2xl (Boss)
- Body text sizes: text-base vs text-sm used inconsistently
- Font weights: font-bold, font-black, font-medium used inconsistently

**Color inconsistencies found:**
- Background colors: bg-black, bg-[#0a0a0c], bg-[#1a0505], bg-[#051a0d]
- Button colors: white bg with black text, transparent with white text, green variants
- Accent colors: cyan-400, cyan-500, red-500, yellow-500, green-500 scattered

**Spacing inconsistencies found:**
- Padding: p-4, p-6, p-8 varies by screen
- Margins: mb-3, mb-4, mb-6, mb-8 inconsistent
- Container max-width: max-w-xl, max-w-2xl, max-w-3xl, max-w-4xl, max-w-5xl varies

**Component inconsistencies found:**
- Button border-radius: some have rounded classes, others don't
- Card borders: border-slate-800, border-slate-700, border-white/5 vary
- Shadow styles: shadow-2xl used inconsistently
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create design system CSS variables</name>
  <files>index.html</files>
  <action>
Add comprehensive design token CSS variables to the :root selector (after the animation variables from Plan 03-01). Add these after the --anim-* variables:

```css
  /* Design System - Colors */
  --color-bg-primary: #0a0a0c;
  --color-bg-secondary: #0f172a;
  --color-bg-tertiary: #1e293b;
  --color-text-primary: #f8fafc;
  --color-text-secondary: #94a3b8;
  --color-text-muted: #64748b;
  --color-accent: #22d3ee;        /* cyan-400 */
  --color-accent-hover: #06b6d4;  /* cyan-500 */
  --color-success: #22c55e;
  --color-warning: #eab308;
  --color-danger: #ef4444;
  
  /* Design System - Typography Scale */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 1.875rem;
  --text-4xl: 2.25rem;
  --text-5xl: 3rem;
  --text-6xl: 3.75rem;
  
  /* Design System - Spacing Scale */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;
  --space-16: 4rem;
  
  /* Design System - Border Radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;
  
  /* Design System - Shadows */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
  --shadow-glow: 0 0 20px rgba(34, 211, 238, 0.3);
```

This creates a centralized design system that can be referenced by both CSS and Tailwind configuration.
  </action>
  <verify>
    grep -n "--color-bg-primary\|--text-xs\|--space-4\|--radius-md\|--shadow-lg" index.html | head -10
  </verify>
  <done>
    CSS design tokens defined for colors, typography, spacing, border-radius, and shadows
  </done>
</task>

<task type="auto">
  <name>Task 2: Standardize screen background colors</name>
  <files>App.tsx</files>
  <action>
Standardize background colors across all 8 screens. The current inconsistency is:
- renderIntro: bg-black
- renderPersonalitySelect: bg-black
- renderRoleSelect: bg-black
- renderInitializing: bg-black (implied via text-cyan-500)
- renderGame: bg-[#0a0a0c]
- renderBossFight: bg-[#0a0a0c]
- renderGameOver: bg-[#1a0505] (red-tinted)
- renderSummary: bg-[#051a0d] (green-tinted)

Standardize to consistent dark background while keeping semantic color tints for Game Over (failure) and Summary (success):

1. **Navigation screens** (Intro, Personality, Role, Initializing): Use bg-[#0a0a0c]
   - Change renderIntro line 365: bg-black → bg-[#0a0a0c]
   - Change renderPersonalitySelect line 390: bg-black → bg-[#0a0a0c]
   - Change renderRoleSelect line 440: bg-black → bg-[#0a0a0c]
   - renderInitializing already uses bg-[#0a0a0c] in its inner container, verify consistency

2. **Gameplay screens** (Game, BossFight): Already use bg-[#0a0a0c] - verify consistent

3. **Outcome screens** (GameOver, Summary): Keep semantic tints
   - renderGameOver line 849: Keep bg-[#1a0505] (red-tint for failure)
   - renderSummary line 902: Keep bg-[#051a0d] (green-tint for success)

This creates a logical design hierarchy: neutral dark for navigation/gameplay, semantic colors for outcomes.
  </action>
  <verify>
    grep -n "bg-black\|bg-\[#0a0a0c\]\|bg-\[#1a0505\]\|bg-\[#051a0d\]" App.tsx | grep -E "(renderIntro|renderPersonality|renderRole|renderGame|renderBoss|renderGameOver|renderSummary)" -A 1 | head -20
  </verify>
  <done>
    Background colors standardized: #0a0a0c for 6 screens (Intro, Personality, Role, Initializing, Game, BossFight), semantic tints preserved for GameOver (#1a0505) and Summary (#051a0d)
  </done>
</task>

<task type="auto">
  <name>Task 3: Audit and standardize button styles</name>
  <files>App.tsx</files>
  <action>
Standardize button component styling across all screens. Current inconsistencies:

**Primary CTA buttons:**
- renderIntro line 379-384: px-6 py-3 md:px-12 md:py-4, white bg, black text, hover:bg-cyan-400, no border-radius
- renderGameOver line 893: px-6 py-3 md:px-12 md:py-4, white bg, red text, hover:bg-red-600, no border-radius
- renderSummary line 938: px-6 py-3 md:px-16 md:py-5, green bg, white text, hover:bg-white, no border-radius

**Secondary/Action buttons:**
- renderPersonalitySelect line 407-432: p-6 md:p-10, bg-slate-900/60, border-slate-800, hover:border-cyan-500
- renderRoleSelect line 456-485: p-6 md:p-8, bg-slate-900/60, border-slate-800, hover:border-cyan-500
- renderGame lines 640-645: py-2 px-3 md:py-4 md:px-4, transparent bg, white text, border-white, hover:bg-cyan-500
- renderBossFight line 803-827: p-3 md:p-4, bg-slate-800, border-slate-700, hover:border-cyan-500

Standardize to 3 button variants:
1. **Primary CTA**: White background, black text, cyan-500 hover
2. **Secondary**: Transparent bg, white text, white border, cyan-500 hover
3. **Card/Button**: Slate-900/60 bg, slate-800 border, cyan-500 border hover

Update button classes to use consistent patterns:
- All primary CTAs: `px-8 py-4 md:px-12 md:py-4 bg-white text-black font-black tracking-wide hover:bg-cyan-500 transition-all duration-[var(--anim-quick)]`
- All secondary: `px-4 py-2 md:px-6 md:py-3 border border-white text-white bg-transparent font-bold tracking-wide hover:bg-cyan-500 hover:border-cyan-500 hover:text-black transition-all duration-[var(--anim-quick)]`

Maintain existing button logic and onClick handlers - only update className attributes.
  </action>
  <verify>
    echo "Counting button occurrences..."
    grep -c "className=\".*button\|onClick=" App.tsx
    echo "Checking primary button patterns..."
    grep -n "bg-white.*text-black" App.tsx
  </verify>
  <done>
    Button styles standardized into 3 variants (Primary CTA, Secondary, Card), consistent sizing, padding, hover states, and transition timing
  </done>
</task>

<task type="auto">
  <name>Task 4: Standardize container widths</name>
  <files>App.tsx</files>
  <action>
Standardize container max-width values across screens for consistent layout:

Current max-widths:
- renderIntro: max-w-xl (for paragraphs), no container limit
- renderPersonalitySelect: max-w-5xl
- renderRoleSelect: max-w-4xl
- renderInitializing: max-w-xl
- renderGame: max-w-full lg:max-w-[43rem]
- renderBossFight: max-w-3xl
- renderGameOver: max-w-2xl
- renderSummary: max-w-2xl

Standardize to logical hierarchy:
- **Wide screens** (Intro, Personality, Role): max-w-5xl for personality grid
- **Standard screens** (Game, BossFight): max-w-4xl or lg:max-w-[43rem]
- **Narrow screens** (Initializing, GameOver, Summary): max-w-2xl

Specific changes:
1. renderIntro: Add wrapper with max-w-5xl
2. renderPersonalitySelect: Keep max-w-5xl
3. renderRoleSelect: Change max-w-4xl → max-w-5xl for consistency
4. renderInitializing: Keep max-w-xl (loading screen doesn't need width)
5. renderGame: Keep lg:max-w-[43rem] (gameplay needs specific width)
6. renderBossFight: Change max-w-3xl → max-w-4xl
7. renderGameOver: Keep max-w-2xl
8. renderSummary: Keep max-w-2xl

Use consistent container pattern: `w-full max-w-{size} px-4 md:px-6`
  </action>
  <verify>
    grep -n "max-w-" App.tsx | grep -E "(render|return)" -B 1 | head -20
  </verify>
  <done>
    Container max-widths standardized: Wide (max-w-5xl) for navigation, Standard (max-w-4xl) for gameplay, Narrow (max-w-2xl) for focused screens
  </done>
</task>

</tasks>

<verification>
1. Design system CSS variables defined for colors, typography, spacing, radius, shadows
2. All screens use consistent base background color (#0a0a0c) except semantic outcome screens
3. Button styles standardized into 3 variants with consistent hover states
4. Container widths follow logical hierarchy (wide/nav, standard/gameplay, narrow/focused)
5. No hardcoded colors - all use CSS variables or Tailwind slate/cyan scales
</verification>

<success_criteria>
- Design token system implemented with CSS variables
- Background colors consistent across 6 screens, semantic tints preserved for 2
- Button variants standardized (Primary, Secondary, Card)
- Container widths follow consistent hierarchy
- Typography scale documented and applied
- Visual consistency audit complete
</success_criteria>

<output>
After completion, create `.planning/phases/03-polish-performance/03-02-SUMMARY.md`
</output>
